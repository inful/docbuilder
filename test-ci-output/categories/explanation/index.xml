<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Explanation :: Category :: Test</title>
    <link>http://test/categories/explanation/index.html</link>
    <description></description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Wed, 17 Dec 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://test/categories/explanation/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Webhook and Documentation Isolation Strategy</title>
      <link>http://test/docs/explanation/webhook-documentation-isolation/index.html</link>
      <pubDate>Wed, 17 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/webhook-documentation-isolation/index.html</guid>
      <description>This document explains how DocBuilder prevents webhook endpoints from colliding with documentation content.&#xA;Architecture: Multi-Server Design DocBuilder uses a defense-in-depth approach with multiple isolated HTTP servers:&#xA;┌─────────────────────────────────────────────────────────┐ │ DocBuilder Daemon │ ├─────────────────────────────────────────────────────────┤ │ │ │ ┌────────────────┐ ┌────────────────┐ │ │ │ Docs Server │ │ Webhook Server │ │ │ │ Port: 8080 │ │ Port: 8081 │ │ │ ├────────────────┤ ├────────────────┤ │ │ │ GET / │ │ POST /webhooks/│ │ │ │ GET /docs/* │ │ github │ │ │ │ GET /search/ │ │ POST /webhooks/│ │ │ │ index.json│ │ gitlab │ │ │ └────────────────┘ │ POST /webhooks/│ │ │ │ forgejo │ │ │ ┌────────────────┐ └────────────────┘ │ │ │ Admin Server │ │ │ │ Port: 8082 │ ┌────────────────┐ │ │ ├────────────────┤ │ LiveReload │ │ │ │ GET /health │ │ Port: 8083 │ │ │ │ GET /ready │ │ (optional) │ │ │ │ GET /metrics │ ├────────────────┤ │ │ │ POST /api/ │ │ GET /sse │ │ │ │ build/ │ └────────────────┘ │ │ │ trigger │ │ │ └────────────────┘ │ └─────────────────────────────────────────────────────────┘ Port Allocation Server Default Port Purpose Collision Risk Docs 8080 Serves Hugo-generated documentation ❌ None - separate server Webhook 8081 Receives forge webhooks ❌ None - separate server Admin 8082 Administrative API, health checks ❌ None - separate server LiveReload 8083 Server-Sent Events for live reload ❌ None - separate server Defense-in-Depth Layers Layer 1: Port Isolation (Primary Defense) Each server runs on a separate TCP port with its own http.Server instance and request multiplexer (http.ServeMux). This provides complete isolation:</description>
    </item>
    <item>
      <title>Architecture Diagrams</title>
      <link>http://test/docs/explanation/architecture-diagrams/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/architecture-diagrams/index.html</guid>
      <description>This document provides visual representations of DocBuilder’s architecture using ASCII diagrams and Mermaid notation.&#xA;Last Updated: December 16, 2025 - Reflects ADR-003 fixed transform pipeline implementation.&#xA;This document provides visual representations of DocBuilder’s architecture using ASCII diagrams and Mermaid notation.&#xA;Table of Contents High-Level System Architecture Pipeline Flow Package Dependencies Data Flow Component Interactions State Machine Diagrams High-Level System Architecture Layer View ┌──────────────────────────────────────────────────────────────────┐ │ COMMAND LAYER │ │ (cmd/docbuilder/commands/) │ │ │ │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐ │ │ │ Build │ │ Daemon │ │ Preview │ │ Discover │ │ │ │ (Kong) │ │ (Watch) │ │ (Live) │ │ (Analysis) │ │ │ └────┬─────┘ └────┬─────┘ └────┬─────┘ └────────┬─────────┘ │ │ │ │ │ │ │ └───────┼─────────────┼─────────────┼─────────────────┼────────────┘ │ │ │ │ └─────────────┴─────────────┴─────────────────┘ │ ┌─────────────────────▼───────────────────────────────────────────┐ │ SERVICE LAYER │ │ (internal/build, internal/daemon) │ │ │ │ ┌────────────────┐ ┌─────────────────┐ ┌──────────────────┐ │ │ │ BuildService │ │ DaemonService │ │ DiscoveryService │ │ │ │ │ │ │ │ │ │ │ │ - Run() │ │ - Start() │ │ - Discover() │ │ │ │ - Validate() │ │ - Stop() │ │ - Report() │ │ │ └────────┬───────┘ └────────┬────────┘ └────────┬─────────┘ │ │ │ │ │ │ └───────────┼───────────────────┼────────────────────┼────────────┘ │ │ │ └───────────────────┴────────────────────┘ │ ┌───────────────────────────────▼─────────────────────────────────────┐ │ PROCESSING LAYER │ │ (internal/hugo, internal/docs, internal/hugo/pipeline) │ │ │ │ ┌──────────────────────────────────────────────────────────────┐ │ │ │ Hugo Generator │ │ │ │ │ │ │ │ ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐ │ │ │ │ │ Pipeline │ │ Theme │ │ Report Builder │ │ │ │ │ │ Processor │ │ System │ │ │ │ │ │ │ └──────┬──────┘ └──────┬──────┘ └──────────┬──────────┘ │ │ │ └─────────┼───────────────┼───────────────────┼────────────────┘ │ │ │ │ │ │ │ ┌─────────▼───────────────▼───────────────────▼──────────────┐ │ │ │ Fixed Transform Pipeline │ │ │ │ (internal/hugo/pipeline/) │ │ │ │ │ │ │ │ 1. parseFrontMatter - Extract YAML │ │ │ │ 2. normalizeIndexFiles - README → _index │ │ │ │ 3. buildBaseFrontMatter - Add defaults │ │ │ │ 4. extractIndexTitle - H1 extraction │ │ │ │ 5. stripHeading - Remove H1 │ │ │ │ 6. rewriteRelativeLinks - Fix .md links │ │ │ │ 7. rewriteImageLinks - Fix image paths │ │ │ │ 8. generateFromKeywords - Create from @keywords │ │ │ │ 9. addRepositoryMetadata - Inject repo info │ │ │ │ 10. addEditLink - Generate editURL │ │ │ │ 11. serializeDocument - Output YAML + content │ │ │ └──────────────────────────────────────────────────────────┘ │ └─────────────────────────────────┬───────────────────────────────────┘ │ ┌─────────────────────────────────▼────────────────────────────────┐ │ DOMAIN LAYER │ │ (internal/config, internal/state, internal/docs) │ │ │ │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐ │ │ │ Config │ │ State │ │ DocFile │ │ Repository │ │ │ │ │ │ │ │ │ │ │ │ │ │ - Hugo │ │ - Git │ │ - Path │ │ - URL │ │ │ │ - Build │ │ - Docs │ │ - Trans │ │ - Branch │ │ │ │ - Forge │ │ - Build │ │ forms │ │ - Auth │ │ │ └────┬─────┘ └────┬─────┘ └────┬─────┘ └────────┬─────────┘ │ └───────┼─────────────┼─────────────┼─────────────────┼────────────┘ │ │ │ │ └─────────────┴─────────────┴─────────────────┘ │ ┌─────────────────────▼───────────────────────────────────────────┐ │ INFRASTRUCTURE LAYER │ │ (internal/git, internal/forge, internal/workspace) │ │ │ │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────────────┐ │ │ │ Git │ │ Forge │ │ Event │ │ Workspace │ │ │ │ Client │ │ Clients │ │ Store │ │ Manager │ │ │ │ │ │ │ │ │ │ │ │ │ │ - Clone │ │ - GitHub │ │ - Append │ │ - Create() │ │ │ │ - Update │ │ - GitLab │ │ - Query │ │ - Cleanup() │ │ │ │ - Auth │ │ - Forgejo│ │ │ │ │ │ │ └────┬─────┘ └────┬─────┘ └────┬─────┘ └────────┬────────┘ │ │ │ │ │ │ │ │ └─────────────┴─────────────┴─────────────────┘ │ │ │ │ │ ┌────────▼────────┐ │ │ │ Foundation │ │ │ │ Errors │ │ │ │ │ │ │ │ - ClassifiedErr │ │ │ │ - Categories │ │ │ │ - Retry Logic │ │ │ └─────────────────┘ │ └─────────────────────────────────────────────────────────────────┘ Pipeline Flow Sequential Stage Execution graph TD A[Build Request] --&gt; B[PrepareOutput Stage] B --&gt; C[CloneRepos Stage] C --&gt; D[DiscoverDocs Stage] D --&gt; E[GenerateConfig Stage] E --&gt; F[Layouts Stage] F --&gt; G[CopyContent Stage] G --&gt; H[Indexes Stage] H --&gt; I{Render Mode?} I --&gt;|always| J[RunHugo Stage] I --&gt;|auto| K{Has Hugo?} K --&gt;|yes| J K --&gt;|no| L[Skip Hugo] I --&gt;|never| L J --&gt; M[Build Complete] L --&gt; M M --&gt; N[Generate Report] N --&gt; O[Emit Events] O --&gt; P[Return Result] style B fill:#e1f5ff style C fill:#e1f5ff style D fill:#e1f5ff style E fill:#e1f5ff style F fill:#e1f5ff style G fill:#e1f5ff style H fill:#e1f5ff style J fill:#e1f5ff style M fill:#c8e6c9 style P fill:#c8e6c9 Stage Detail: CloneRepos CloneRepos Stage │ ├─ For each repository config: │ │ │ ├─ 1. Authenticate │ │ ├─ SSH Key │ │ ├─ Token │ │ └─ Basic Auth │ │ │ ├─ 2. Check Incremental │ │ ├─ Compare HEAD ref │ │ ├─ Check doc hash │ │ └─ Skip if unchanged │ │ │ ├─ 3. Clone or Update │ │ ├─ git clone (first time) │ │ └─ git pull (update) │ │ │ ├─ 4. Read HEAD │ │ └─ Store ref in state │ │ │ └─ 5. Emit Event │ ├─ RepositoryCloned │ └─ RepositoryUpdated │ └─ Update GitState Stage Detail: CopyContent CopyContent Stage │ ├─ For each DocFile: │ │ │ ├─ Fixed Transform Pipeline (11 sequential transforms) │ │ │ │ │ ├─ 1. Parse Front Matter │ │ │ ├─ Extract YAML header │ │ │ └─ Parse markdown content │ │ │ │ │ ├─ 2. Normalize Index Files │ │ │ └─ README.md → _index.md │ │ │ │ │ ├─ 3. Build Base Front Matter │ │ │ ├─ Add repository metadata │ │ │ ├─ Add section/path info │ │ │ ├─ Add forge info │ │ │ └─ Add date/timestamp │ │ │ │ │ ├─ 4. Extract Index Title │ │ │ ├─ Find first H1 heading │ │ │ └─ Set as page title │ │ │ │ │ ├─ 5. Strip Heading │ │ │ └─ Remove first H1 from content │ │ │ │ │ ├─ 6. Rewrite Relative Links │ │ │ ├─ Fix .md → / conversions │ │ │ └─ Resolve relative paths │ │ │ │ │ ├─ 7. Rewrite Image Links │ │ │ └─ Fix image path references │ │ │ │ │ ├─ 8. Generate from Keywords │ │ │ └─ Process @keywords directives │ │ │ │ │ ├─ 9. Add Repository Metadata │ │ │ └─ Inject repo context │ │ │ │ │ ├─ 10. Add Edit Link │ │ │ ├─ Check forge capabilities │ │ │ ├─ Build edit URL │ │ │ └─ Add to front matter │ │ │ │ │ └─ 11. Serialize Document │ │ ├─ Generate YAML │ │ └─ Combine with content │ │ │ └─ Write to content/ │ └─ Create target file │ └─ Update DocsState Package Dependencies Dependency Graph ┌──────────────────┐ │ cmd/docbuilder/ │ │ commands/ │ └────────┬─────────┘ │ ▼ ┌───────────────────┐ │ internal/build/ │ │ internal/daemon/ │ └────────┬──────────┘ │ ├────────────────────────────────┐ │ │ ▼ ▼ ┌──────────────┐ ┌──────────────┐ │ config/ │ │ state/ │ └──────┬───────┘ └──────┬───────┘ │ │ ├────────────────────────────────┤ │ │ ▼ ▼ ┌────────────────────────────────────────────────┐ │ Domain Layer │ │ ┌─────────┐ ┌──────────────┐ ┌───────────┐ │ │ │ docs/ │ │ hugo/ │ │ forge/ │ │ │ └────┬────┘ └──────┬───────┘ └─────┬─────┘ │ │ │ │ │ │ │ │ ┌────▼─────────┐ │ │ │ │ │ pipeline/ │ │ │ │ │ │ (transforms)│ │ │ │ │ └──────────────┘ │ │ └───────┼────────────────┼──────────────┼────────┘ │ │ │ └────────────────┴──────────────┘ │ ┌────────────────┴─────────────┐ │ │ ▼ ▼ ┌──────────────┐ ┌──────────────┐ │ git/ │ │ workspace/ │ └──────┬───────┘ └──────┬───────┘ │ │ └─────────────┬─────────────┘ │ ▼ ┌──────────────┐ │ foundation/ │ │ errors/ │ └──────────────┘ Import Rules Layer Dependencies (must respect):</description>
    </item>
    <item>
      <title>Architecture Overview</title>
      <link>http://test/docs/explanation/architecture/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/architecture/index.html</guid>
      <description>DocBuilder implements a staged pipeline to turn multiple Git repositories into a unified Hugo documentation site.&#xA;Pipeline Flow Config → Clone → Discover → Generate Hugo Config → Transform Content → Index Pages → (Optional) Run Hugo Transform Content Stage executes the fixed transform pipeline:&#xA;Parse → Normalize → Build → Extract Title → Strip Heading → Rewrite Links → Rewrite Images → Keywords → Metadata → Edit Link → Serialize Each stage records duration, outcome, and issues for observability.</description>
    </item>
    <item>
      <title>Comprehensive Architecture</title>
      <link>http://test/docs/explanation/comprehensive-architecture/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/comprehensive-architecture/index.html</guid>
      <description>Comprehensive Architecture Documentation Table of Contents Overview Core Principles System Architecture Package Structure Data Flow Key Subsystems Extension Points Operational Considerations Overview DocBuilder is a Go CLI tool and daemon that aggregates documentation from multiple Git repositories into a unified Hugo static site. It implements a staged pipeline architecture with event sourcing, typed configuration/state management, and comprehensive observability.</description>
    </item>
    <item>
      <title>Explanation Documentation</title>
      <link>http://test/docs/explanation/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/index.html</guid>
      <description>Architecture Documentation Index This directory contains comprehensive architecture documentation for DocBuilder. The documentation is organized to provide different views and levels of detail for various audiences.&#xA;Documentation Structure High-Level Overview Architecture Overview (architecture.md)</description>
    </item>
    <item>
      <title>Namespacing Rationale</title>
      <link>http://test/docs/explanation/namespacing-rationale/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/namespacing-rationale/index.html</guid>
      <description>Forge Namespacing Rationale Problem Aggregating multiple repositories from different hosting forges (GitHub, GitLab, Forgejo, etc.) risks name collisions (service-api existing on two platforms) and makes future cross-forge expansion disruptive if paths are encoded without forge context.&#xA;Options Considered Option Pros Cons Never prefix Shorter paths Collisions; retrofits painful Always prefix Stable &amp; explicit Longer paths for single-forge installs Conditional (current) Shorter single-forge, collision-safe multi-forge Slight path shape change when second forge added Chosen Strategy namespace_forges=auto (default): Insert &lt;forge&gt;/ only when &gt;1 forge type detected among active repositories. Users wanting stability ahead of expansion can set always.</description>
    </item>
    <item>
      <title>Package Architecture</title>
      <link>http://test/docs/explanation/package-architecture/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/package-architecture/index.html</guid>
      <description>Package Architecture Guide This document provides detailed information about each internal package in DocBuilder, including responsibilities, key types, interfaces, and usage patterns.&#xA;Table of Contents Foundation Packages Configuration &amp; State Core Domain Infrastructure Application Services Presentation Layer Testing Support Foundation Packages internal/foundation/errors Purpose: Unified error handling system for all DocBuilder operations.</description>
    </item>
    <item>
      <title>Renderer Testing</title>
      <link>http://test/docs/explanation/renderer-testing/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/renderer-testing/index.html</guid>
      <description>Hugo Renderer Testing Strategy Overview The Hugo renderer system uses a dual-path testing approach to ensure both the NoopRenderer (for CI/fast tests) and BinaryRenderer (for integration tests) work correctly.&#xA;Test Files renderer_test.go Purpose: Fast unit tests that don’t require Hugo binary</description>
    </item>
    <item>
      <title>Skip Evaluation Logic</title>
      <link>http://test/docs/explanation/skip-evaluation/index.html</link>
      <pubDate>Mon, 15 Dec 2025 00:00:00 +0000</pubDate>
      <guid>http://test/docs/explanation/skip-evaluation/index.html</guid>
      <description>Skip Evaluation System Overview The skip evaluation system prevents unnecessary full rebuilds when nothing has changed. It uses a rule-based validation approach to determine if a build can be safely skipped, comparing current state against previous build artifacts and persisted metadata.&#xA;When Builds Are Skipped A build will be skipped (reusing previous public/ output) when all of the following are true:</description>
    </item>
  </channel>
</rss>